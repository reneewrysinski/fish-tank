<!DOCTYPE html>
<html>
    <head>
    <link rel="stylesheet" href="main.css">
    </head>
    <header class="site-header">
        <div class="wrapper">
          <a class="site-title" href="https://reneewrysinski.github.io/">
            <img src="https://reneewrysinski.github.io/assets/img/title.png" alt="Renee Wrysinski">
          </a>
      
          <nav class="site-nav">
            <a href="#" class="menu-icon"></a>
      
            <div class="menu">
              
              
              
              <!-- <a class="page-link" href="https://reneewrysinski.github.io/">Home</a> -->
                
                  <div class="menu-page">
                  <a class="page-link" href="https://reneewrysinski.github.io/">Home</a>
                  </div>
                
              
              
              
              <!-- <a class="page-link" href="https://reneewrysinski.github.io/projects">Projects</a> -->
                
                  <div class="dropdown">
                    <a class="dropdown-toggle" href="https://reneewrysinski.github.io/projects">Projects</a>
                    <!-- <a href="#" class="dropdown-toggle">Projects</a> -->
                    <div class="dropdown-menu">
                      
                      
                        <a class="subpage-link" href="https://reneewrysinski.github.io/projects/academic">Academic</a><br>
                      
                      
                        <a class="subpage-link" href="https://reneewrysinski.github.io/projects/personal">Personal</a><br>
                      
                    </div>
                  </div>
                
              
              
              
              <!-- <a class="page-link" href="https://reneewrysinski.github.io/resume">Resume</a> -->
                
                  <div class="menu-page">
                  <a class="page-link" href="https://reneewrysinski.github.io/resume">Resume</a>
                  </div>
                
              
            </div>
          </nav>
        </div>
      </header>

  <body>

    <div class="page-content">
      <div class="wrapper">
        <div class="post">

          <header class="post-header">
            ELEC 327 Final Project: 
            <h1 class="post-title">
            Digital Desktank
            </h1>
            <h1 class="post-subtitle">Interactive desktop fish tank implemented with an MSPM0-based closed-loop embedded system.</h1>
            <!-- {% if page.subtitle %}<h1 class="post-subtitle">{{ page.subtitle }}</h1>{% endif %} -->
            <p class="post-meta"><span class="post-date">August 3, 2025
            </span><span class="post-author"><br>Renee Wrysinski, Paulina Arizpe-Romo, 
                Oyinkansola Sobakin-Ashebu, Emmie Casey, Timauri-Lee Carby</span></p>
          </header>

          <article class="post-content">
            <p><img src="https://raw.githubusercontent.com/reneewrysinski/fish-tank/c083ac47d65f2b06dc62e5b72344b0b8eebbdb7e/site-images/image3.jpg" alt="Neopixel grid displaying fish" class="post-pic">

            <h4 id="table-of-contents">Table of Contents</h4>
            <ol>
            <li><a href="#concept-desc">Concept Description</a></li>
            <li><a href="#des-evo">Design Concept Evolution</a></li>
            <li><a href="#bhvr-fsm">Behavior and State Machine</a></li>
            <li><a href="#hdwr-des">Hardware Design Description</a></li>
            <li><a href="#code-arch">Code Architecture</a></li>
            <li><a href="#pedagogy">Pedagogical Insights</a></li>
            <li><a href="#add-links">Additional Links</a></li>

            </ol>

            <h4 id="concept-desc">CONCEPT DESCRIPTION</h4>
            <p>This project is an interactive desktop fish tank created using an MSPM03507 and 16x16 Neopixel LED grid. By default, the fish simply swims around its tank, but you can play and interact with it: you can make it race around its tank, feed it, 
              make it go to sleep, or even play a fun game with it! In addition to displaying fun animations, it also plays tunes using a PWM-controlled buzzer when you perform certain interactions. 
            <br></p>

            <h4 id="des-evo">DESIGN CONCEPT EVOLUTION</h4>
            <p>For our final project, we initially hoped to recreate a pocket sized game we all love, the Tamagotchi. A Tamagotchi is a small handheld digital pet where the player cares for a virtual creature by feeding it, playing with it, and cleaning up after it. If neglected, the pet can become unhappy or even "die," encouraging the player to check in regularly and be responsible. For this design, we had planned to recreate the pixel art that is traditionally featured on Tamagotchis, as well as 3D-print the egg-shaped case shown on the right below. Unfortunately, our Tamagotchi plan had to be scrapped, as we faced substantial challenges in its execution, especially regarding communicating with the screen due to poor documentation of its use of SPI. As such, we pivoted to a second design, The Oracle.
              <div class="wrapper" style="text-align: center;">
                <figure style="display: inline-block; width: 45%; margin: 0 2%;">
                  <img src="site-images/image4.jpg" alt="tamagotchi pcb built by group">
                  <figcaption>Tamagotchi PCB Built</figcaption>
                </figure>
                <figure style="display: inline-block; width: 35%; margin: 0 2%;">
                  <img src="https://raw.githubusercontent.com/reneewrysinski/fish-tank/c083ac47d65f2b06dc62e5b72344b0b8eebbdb7e/site-images/image2.png" alt="actual tamagotchi">
                  <figcaption>Actual Tamagotchi</figcaption>
                </figure>
              </div>
            <p>The Oracle is a low-power, closed-loop embedded system based on the MSP microcontroller, designed to provide an interactive fortune-telling and karma-evaluation experience through three push-buttons and six 7-segment displays. Operating primarily in a sleep state with periodic or button-triggered wakeups via timer interrupts, the system features a debounced multi-press button interface for navigating a simple three-option menu: fortune telling using true random number generation, wish fulfillment from predefined categories, and karma evaluation based on user input patterns. When idle, it displays an “ASLEEP” animation and wakes on button press to enter the “AWAKE” state. Designed for resource-constrained environments, The Oracle balances playfulness with low-power efficiency.</p>
            <div class="wrapper" style="text-align: center;">
              <figure style="display: inline-block; width: 85%; margin: 0 2%;">
                <img src="site-images/image1.png" alt="schematic of oracle">
                <figcaption>Schematic Diagram of Oracle PCB</figcaption>
              </figure>
            </div>
            
             <p>Despite extensive work on the development of scripts for the Oracle and debugging, we switched to our third design, the fish tank, due to our microcontroller overheating. This issue arose because we were attempting to power all six 7-segment LEDs with the microcontroller, which was more than what it could handle. Using the Simon and a Neopixel LED grid, we created a display of a fish virtual pet comparable to our original goal. </p>
            <h4 id="bhvr-fsm">BEHAVIOR AND STATE MACHINE</h4>
              <p>When you power the tank on, it kicks off in the Intro (State 0) where an intro animation is displayed. As soon as that animation wraps up, the code drops you straight into Swim (State 1), the “home base” where your fish idle swims. While it’s swimming at a normal pace, the game is always waiting for button presses. Hit SW1 and the fish bursts into Swim Fast (State 2), zooming around until the button is no longer pressed. Pressing SW2 while the fish is swimming will launch the Play Game state (State 3); at the end of each round, pressing the buttons on the right (SW1 or SW2) restarts the game, and pressing the buttons on the left (SW3 or SW4) send it back to the main swimming screen. Press SW3 and you jump into Feed (State 4), where the fish nibbles pellets and once that sequence ends, you’re right back to Swim. Finally, a press of SW4 sends the fish off to Sleep (State 5), dimming the scene and settling your little friend down—any button press then wakes it up and resumes the Swim state. In every case, after any action completes you return to the easygoing Swim (State 1) as shown in the diagram below.</p>
              <div class="wrapper" style="text-align: center;">
                <figure style="display: inline-block; width: 85%; margin: 0 2%;">
                  <img src="site-images/image5.jpg" alt="state diagram for finite state machine">
                  <figcaption>State Diagram</figcaption>
                </figure>
              </div>
              <p>	The Play Game state is the most complicated of all six states, as instead of displaying a simple animation, it has to receive inputs from all four buttons and the random number generator, and display different animations based on these inputs. In the game, the fish is given a choice of four hiding spots, and has to choose one to hide in. After a hiding spot is chosen, three of the four hiding spots are removed. If your chosen hiding spot is the one remaining, you win and are shown a winning animation and are played a cheery song; if your hiding spot is removed, you lose and are shown a losing animation and are played a sad tune. </p>

            <h4 id="hdwr-des">HARDWARE DESIGN DESCRIPTION</h4>
            <div class="wrapper" style="text-align: center;">
              <figure style="display: inline-block; width: 95%; margin: 0 2%;">
                <img src="site-images/image6.jpg" alt="image of hardware setup">
              </figure>
            </div>
            <p>Microcontroller: MSPM0G3507</p>
            <ul>
              <li>32 MHz SYSOSC clock, low-power sleep via WFI</li>
            </ul>
            <p>Inputs: Four momentary push-buttons (SW1, SW2, SW3, SW4)</p>
            <p>Outputs:</p>
            <ul>
              <li>16x16 Neopixel LED Grid (WS2812B)</li>
              <li>Buzzer PWM on Timer A1 channel: audible feedback</li>
            </ul>
            <p>Power:</p>
            <ul>
              <li>Microcontroller powered by onboard 3.3V regulator</li>
              <li>LED grid powered by USB or external batteries connected to Simon board</li>
            </ul>

            <h4 id="code-arch">CODE ARCHITECTURE</h4>
            <!-- add text and images here -->
            <ul>
              <li>main.c:</li>
                <ul>
                  <li>contains state machine determining behavior of fish</li>
                  <li>uses functions defined in various helper files to obtain desired behavior</li>
                </ul>
              <li>display.c</li>
                <ul>
                  <li>ccontains functions to take RGB arrays from image_frames.h and convert these to SPI packets, then send them to Neopixel grid</li>
                </ul>
              <li>animations.c</li>
                <ul>
                  <li>contains functions to create animations from frames contained in image_frames.h</li>
                    <ul>
                      <li>simple animations such as Intro, Swim, Feed, Sleep are just a series of frames</li>
                      <li>behavior of game is determined by play_game() function, which plays different animations based on inputs from buttons and random number generator</li>
                    </ul>
                </ul>
              <li>buttons.c:</li>
                <ul>
                  <li>contains functions to interact with buttons on Simon board</li>
                </ul>
              <li>effects.c</li>
                <ul>
                  <li>contains buzzer control functions and different types of delays (wait for set period, wait until button press, etc.)</li>
                </ul>
              <li>lab6_helper.c</li>
                <ul>
                  <li>slightly modified helper functions from Lab 6</li>
                  <li>functions to initialize timer, processor, GPIO, PWM, SPI</li>
                </ul>
              <li>simon_random.c:</li>
                <ul>
                  <li>slightly modified random number generator from Simon midterm project</li>
                </ul>
              <li>image_frames.h</li>
                <ul>
                  <li>contains RGB arrays of frames for animations</li>
                </ul>
              <li>notes.h</li>
                <ul>
                  <li>contains defined notes for playing music on buzzer</li>
                </ul>
            </ul>

            <h4 id="pedagogy">PEDAGOGICAL INSIGHTS</h4>
            <!-- add text and images here -->
            <p>To implement this fish tank, we had to utilize a 16x16 Neopixel grid. We were provided with example code to flash an 8x8 Neopixel grid on and off, but had to adapt this code to work with a larger grid and also create a variety of functions to display simple 16x16 pixel art on this LED grid. This grid is connected to the SPI pins of the MSPM0G3507, but does not communicate using a typical SPI protocol; the bits must be encoded before being sent. In this encoding, every 1 bit becomes 3 bits, with 1 becoming 110 and 0 becoming 100.</p>

            <h4 id="add-links">ADDITIONAL LINKS</h4>

            <ul>
              <li><a href="https://github.com/reneewrysinski/fish-tank">Main GitHub</a></li>
              <li><a href="https://github.com/reneewrysinski/fish-tank/tree/main/demos">Video Demos of Desktank Functions</a></li>
              <li><a href="https://github.com/reneewrysinski/fish-tank/tree/main/videos">Presentation and Ad Videos</a></li>
              <li><a href="https://github.com/reneewrysinski/fish-tank/tree/main/presentation-and-report">Presentation and Report</a></li>
              <li><a href="https://github.com/reneewrysinski/fish-tank/tree/main/animation-gifs">Animation Gifs</a></li>
              <li><a href="https://github.com/reneewrysinski/fish-tank/tree/main/mspm0-code">MSPM0 Code</a></li>
              <li><a href="https://github.com/pauauu/mspm0-oracle">Oracle Unused Code</a></li>
            </ul>

                    </article>

      </div>
      </div>
    </div>

    <footer class="site-footer">
        <div class="wrapper">
          <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
              <h4>CONTACT</h4>
      
              <div class="social-links">
                
                  <div class="social-link contact-links">
      
                    
                    <img src="https://reneewrysinski.github.io/assets/img/icons/email.png" alt="email">
      
                    
                      
                        
                        
                        
                        
                        
      
                        
                        
                        
                        <span data-resu="iksnisyrweener" data-eman-niamod="liamg" data-dlt-niamod="moc" id="email-link" class="link email-link-cloaked">
                          Email
                        </span>
                      
                    
                  </div>
      
                
              </div>
            </div>
      
            <div class="footer-col footer-col-2">
              
                <h4>FOLLOW</h4>
      
                <div class="social-links follow-links">
                  
                    <div class="social-link">
      
                      
                      <img src="https://reneewrysinski.github.io/assets/img/icons/linkedin.png" alt="linkedin">
                      <a href="http://linkedin.com/in/rwrysinski">
                        
                          LinkedIn
                        
                      </a>
                    </div>
      
                  
                    <div class="social-link">
      
                      
                      <img src="https://reneewrysinski.github.io/assets/img/icons/github.png" alt="github">
                      <a href="http://github.com/reneewrysinski">
                        
                          GitHub
                        
                      </a>
                    </div>
      
                  
                    <div class="social-link">
      
                      
                      <img src="https://reneewrysinski.github.io/assets/img/icons/youtube.png" alt="youtube">
                      <a href="https://www.youtube.com/@renee.wrysinski">
                        
                          YouTube
                        
                      </a>
                    </div>
      
                  
                    <div class="social-link">
      
                      
                      <img src="https://reneewrysinski.github.io/assets/img/icons/instagram.png" alt="instagram">
                      <a href="https://www.instagram.com/reneewrysinski/">
                        
                          Instagram
                        
                      </a>
                    </div>
      
                  
                </div>
              
            </div>
      
            
              <div class="footer-col footer-col-3 powered-by">
                <p>
                  powered by <a href="https://github.com/eliottvincent/bay">Bay</a> | <span id="year">2025</span>
                </p>
              </div>
            
          </div>
        </div>
      </footer>
  </body>
</html>
